---
layout: post
title:  Linux C从入门到进阶
date:   2018-09-16 1:05:00
catalog:  true
tags:
    - clion
    - GCC     
       

---
 

## Linux C 和Windows C

  - 标准C，ANSI-C 
  - Windows C
  - Linux C
  
## GCC 编译器

GNU编译器套件(GNU Compiler Collection) GNU:是GNU is Not Unix的递归缩写，即类Unix操作系统
Linux:Linux Is Not UniX 
PNG:PNG’s Not GIF 
RPM:RPM Package Manager

![](![](https://lh3.googleusercontent.com/-PlDM5ncln4I/W55cs1iEZVI/AAAAAAAAO8A/U7b9Pti8E_8ACEAYD4hFLpj0KOH9XSvjQCHMYCw/I/15371051127028.jpg)

 
### GCC 安装
 mac一般自带gcc，通过`gcc --version`,查看gcc版本；
 CentOS 安装:yum install gcc 默认已安装；
 Ubuntu 安装:apt-get install gcc 默认已安装；

### GCC常用命令

| 命令参数 | 说明 |
| --- | --- |
| --help | 帮助信息 |
| -save-temps | 不删除中间文件 |
| -Werror | 所有警告当做是错误 |
| -w | 不显示警告 |
| -m32/-m64 | 生成32/64位程序 |
| -D | 追加宏定义 |
| -L | 追加库文件目录 |
| -l | 追加库文件 |
| -I | 追加头文件目录 |
| -include | 追加头文件 |

查看完整信息，采用命令`man gcc`

### hello gcc

编写hello world程序如下：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    printf("hello world\n");
    return 0;
}
```
分步编译如下(其中输出扩展名可以自定义)：

```
gcc -E hello.c -o hello.i #预编译，输出hello.i
gcc -S hello.i -o hello.s #编译，生成hello.s
gcc -c hello.s -o hello.o #汇编，生成hello.o
gcc hello.o -o hello #链接，生成可执行程序hello
./hello # 执行可执行程序hello

```
这几步等价于
`gcc hello.c -o hello`;
如果没有指定-o参数，默认输出为a.out
编译32位程序
`gcc -m32 hello.c -o hello32`;
编译64位程序
`gcc -m64 hello.c -o hello64`;
查看可执行程序是32或64位命令:

```
personal:projects apple$ file hello
hello: Mach-O 64-bit executable x86_64
personal:projects apple$ file hello32
hello32: Mach-O executable i386
personal:projects apple$ file hello64
hello64: Mach-O 64-bit executable x86_64

```
gcc默认按当前系统是32还是64位编译cx,查看系统位数的命令是：uname

```
personal:projects apple$ uname -a
Darwin personal.local 16.1.0 Darwin Kernel Version 16.1.0: Thu Oct 13 21:26:57 PDT 2016; root:xnu-3789.21.3~60/RELEASE_X86_64 x86_64
```

## 多文件编译

多文件编译遵循一条原则：
- 头文件，无需在gcc中指定，因此头文件的个数不影响编译结果；
- 源文件：gcc a.c,b.c -o 源文件顺序可调。
提高编译速度的技巧，假设有多个文件a.c,b.c,可分开编译到汇编这一步，最后链接时再一块编译，以后a或b有变化时，无需全量编译，只编译有修改的源文件，再执行链接就可以了。

```
gcc -c a.c -o a.o # 执行到汇编这步
gcc -c b.c -o b.o
gcc a.o b.o -o hello #链接生成可执行程序
```

## GDB调试
### GDB简介
GDB:GNU DeBuger，与GCC配套的调试工具 ;
man gdb 查看帮助手册;
mac上gdb安装和使用参考：
[https://blog.csdn.net/github_33873969/article/details/78511733](https://blog.csdn.net/github_33873969/article/details/78511733)
### GDB 常用命令
要想使用gdb调试，需要在使用gcc编译时指定-g参数：
在目标文件加入源代码 gcc -g xxx.c -o xxx
```
gdb xxx 开始调试，进入gdb控制台(gdb) list 或者 l 列出所有代码 
(gdb) run 或者 r 运行程序
(gdb) start 开始调试(gdb) quit 或者 q 退出调试
(gdb) next 或者 n 运行下一行，仅在当前函数
(gdb) step 或者 s 运行下一行，可进入函数(gdb) print 或者 p 变量名 打印变量当前值
(gdb) set var i=3 局部变量设置(gdb) info 或者 i 查看信息 locals 查看当前变量(gdb) break 或者 b 设置断点，接行号或函数(gdb) continue 或者 c   继续运行，直到下一个断点(gdb) info 或者i breakpoints 列出断点(gdb) delete或者d 删除断点
```

## 静态链接库

## 动态链接库







